## In-memory DB

in-memory DB는 disk-based DB와 달리 말 그대로 메모리에 데이터를 저장한다.

외부 저장 장치에 데이터를 저장하지 않고 메모리에서 데이터를 읽고 쓴다.

메모리, 디스크 간 병목이 없기 때문에 disk-based DB보다 훨씬 속도가 빠르다.

disk-based DB는 데이터를 페이지(블록)단위로 읽어온다. 찾으려는 데이터가 메모리에 있는 페이지(블록)에 없다면 또 디스크에서 다른 페이지를 읽어야한다. 이 과정에서 지연이 발생한다. 

—> in-memory DB는 애초에 메모리에 모든 데이터가 있기 때문에 지연이 적다.

[in-memory DB가 disk-based DB보다 더 좋은가]

in-memory dB는 기본적으로 영속성(persistence)을 보장하지 않는다.

에러가 나서 갑자기 프로세스가 종료되면 데이터가 모두 유실될 수도 있다. 

또, 인메모리DB는 메모리에 데이터를 저장하기 때문에 저장 공간이 한정되어있다. 한계에 도달하면 기존 데이터를 지우던가 새로운 데이터를 입력하지 못할 것이다.

따라서 반드시 영속성이 필요하지 않고 저장공간이 많이 필요한 것도 아니라면 인메모리DB는 매우 유용하다.(예를 들어 테시트에 DB가 필요하다면 in-memory DB가 좋은 선택일 수 있다. : SQLite)

[in-memory DB는 NoSQL과 동의어인가]

in-memory DB는 NoSQL과 동의어가 아니다.

대표적인 RDBMS인 MySQL도 in-memory 모드를 지원한다.

유명한 NoSQL인 redis가 in-memoryDB이지만, 결국 in-memory DB는 NoSQL과 동의어가 아니다.

## 파티션/클러스터

### 파티션이란?

매우 많은 양의 데이터를 가지고 있는 테이블(Big Transaction Table)에서 트러블 슈팅이 발생될 경우 심각한 악영향을 미칠 수 있다.

이러한 악영향을 예방 및 피해를 줄이고 효율적으로 관리하기 위해 테이블을 작은 단위로 나누는 것을 파티션이라고 한다.

### DB Partitioning

데이터베이스 분할 또는 파티셔닝은 데이터베이스를 여러 부분으로 분할하는 것이다. 데이터베이스 분할은 중요한 튜닝 기법으로 데이터가 너무 커져서 조회하는 시간이 길어질 때 또 는 용이성, 성능, 가용성 등의 향상을 이유로 행해지는 것이 일반적이다. 분할된 각 부분을 파티션이라고 부른다. 물리적인 데이터 분할이 있지만DB에 접근하는app의 입장에서는 이를 인식하지 못함.

### 파티션의 기능

- 파티션은 대용량의 테이블을 여러개의 데이터 파일로 분리해 저장하는 것을 말한다.
- 테이브르이 데이터가 물리적으로 분리되어 데이터 파일에 저장되면 CRUD 수행의 성능이 향상된다.
- 파티션은 각각 파티션 별로 독립적으로 관리될 수 있다. (파티션 별 백업, 복구 및 인덱스 생성 등)
- 데이터를 조회할 때 데이터의 범위를 줄여서 성능을 향상시킬 수 있다.

## 주의할 점

- 파티션 구성, 관리를 잘못하여 index Unusable 발생을 주의해야 한다.
- 파티션 키로 나뉜 테이블에 키 조건을 주지 않아 전체에 접근하지 않도록 주의해야한다.

## Partition Table 종류

## 1. Range Partition

- 테이블의 칼럼 중에서 값의 범위를 기준으로 여러개의  파티션으로 데이터를 나누어 테이블 스페이스에 저장하는 것이다.
- 예를 들어 급여가 있다면 급여의 범위를 지정해서 각각 여러 개의 파티션으로 나눈 것이다.

## 2. List Partition

- 특정 값을 기준으로 파티션을 분할하는 방법이다.
- 데이터 분포가 낮지 않고 균등하게 분포되어 있다면 유용하다.(예를 들어 부서 같은 것)
- 단일 칼럼만 가능

## 3. Hash Partition

- DBMS 내부 적으로 해시 함수를 사용해서 데이터를 분할한다.
- 결과적으로 Range 나 List와는 다르게 DBMS가 알아서 분할하고 관리하는 것이다.
- 이력관리의 목적보단 성능 향상의 목적에서 나온 개념이다. 일정한 분포를 가진 파티션으로 나누고 균등한 데이터 분포도를 이용한 병렬처리로 퍼포먼스를 향상시킬 수 있다.

## 4. Composite Partition

- 파티션의 칼럼을 Main/Sub로 나누어 분할하는 방식이다.
- 버전에 따라 다양하게 조합 가능하다.(List/List, List/Hash)
